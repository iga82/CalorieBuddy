<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src='/javascripts/globals.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  </head>
  <body>
    <h1>{{ title }}</h1>
    <p>Welcome to {{ title }}</p>

  <div>
    <h1 class="calorieTotal" style="color: red;">0</h1>
  </div>

  <div class="itemSelect">
  </div>

  <button class="btn1">Add New Item</button>
  <button class="btn2">Done</button>

  <script>
    $(document).ready(function() {
      $(".btn1").click(function(){
        $('.itemSelect').append("<div><select class='select'></select> Amount: <input type='text' name='amount' size='4'></div>");
        var selectDiv = '.select' + selectIndex;
        for(var key in calorie_dictionary){
          $('.select').append("<option>" + key + "</option>");
        }
        // increase index to make selects unique
        selectIndex += 1;
      });

      $(".btn2").click(function(){
        // var selected_items = $('.select').find(":selected").text();
        var total = "";
        var selected_items = $('.select').find(":selected").get();
        $.each(selected_items, function(index, value) {
          console.log("The string value: " + $(value).val());
          total += $(value).val();
        });
        console.log("this is the total: " + total);
        $('.calorieTotal').html(total);
      });

    });
  </script>

</html>