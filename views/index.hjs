<!DOCTYPE html>
<html>
  <head>
    <title>{{ title }}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/bootstrap/css/bootstrap.css' />
    <script src='/javascripts/globals.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  </head>
  <body>
    <h1>{{ title }}</h1>
    <p>Welcome to {{ title }}</p>

  <div>
    <h1 class="calorieTotal" style="color: red;">0</h1>
  </div>

  <div class="itemSelect">
  </div>

  <button class="btn1">Add New Item</button>
  <button class="btn2">Done</button>

  <script>
    $(document).ready(function() {
      $(".btn1").click(function(){
        $('.itemSelect').append("<div><select class='select'></select> Amount: <input id='textInput" + textIndex + "' type='text' name='amount' size='4'></div>");
        textIndex += 1;
        for(var key in calorie_dictionary){
          $('.select').append("<option>" + key + "</option>");
        }
      });

      $(".btn2").click(function(){
        // var selected_items = $('.select').find(":selected").text();
        var total = 0.0;
        // get an array of JSON Objects with the selected options
        var selected_items = $('.select').find(":selected").get();
        // index that loops through the different text boxes
        var loopThroughtTextIndex = 0;
        // loop through the array of selected items
        $.each(selected_items, function(index, value) {
          var textInputName = '#textInput' + loopThroughtTextIndex;
          // increase text input index
          loopThroughtTextIndex += 1;
          // get the value from the text input box and convert into an int
          var textInputField = parseFloat($(textInputName).val());
          // build up the total
          total += calorie_dictionary[$(value).val()] * textInputField;
        });
        $('.calorieTotal').html(total);
      });

    });
  </script>

</html>